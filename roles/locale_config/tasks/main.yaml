- name: Ensure locale is generated
  ansible.builtin.command: locale-gen id_ID.UTF-8 en_US.UTF-8
  when: ansible_distribution == "Ubuntu"
  changed_when: false

- name: Set locale environment variables
  ansible.builtin.lineinfile:
    path: /etc/default/locale
    line: "{{ item }}"
    state: present
  loop:
    - LANG=id_ID.UTF-8
    - LC_ALL=id_ID.UTF-8
    - LC_CTYPE=en_US.UTF-8

- name: Update locale settings
  ansible.builtin.command: update-locale LANG=en_US.UTF-8
  when: ansible_distribution == "Ubuntu"
